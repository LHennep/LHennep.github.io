<?php
$host = 'localhost';
$user = 'root';
$password = '';
$dbname = 'cijfersysteem';

try {
    $pdo = new PDO("mysql:host=$host;dbname=$dbname", $user, $password);
    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

    $stmt = $pdo->query("SELECT * FROM cijfers");

    echo "<table border='1'>
            <tr>
                <th>Leerling</th>
                <th>Cijfer</th>
                <th>Actie</th>
            </tr>";

    while ($row = $stmt->fetch()) {
        echo "<tr>
                <td>" . htmlspecialchars($row['naam']) . "</td>
                <td>" . htmlspecialchars($row['cijfer']) . "</td>
                <td><a href='insertResult.php'>invoegen</a></td>
              </tr>";
    }

    echo "</table>";
} catch (PDOException $e) {
    echo "Error: " . $e->getMessage();
}
?>
<?php
$host = 'localhost';
$user = 'root';
$password = '';
$dbname = 'cijfersysteem';

try {
    $pdo = new PDO("mysql:host=$host;dbname=$dbname", $user, $password);
    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

    $stmt = $pdo->query("SELECT * FROM cijfers");

    echo "<table border='1'>
            <tr>
                <th>Leerling</th>
                <th>Cijfer</th>
                <th>Actie</th>
            </tr>";

    while ($row = $stmt->fetch()) {
        echo "<tr>
                <td>" . htmlspecialchars($row['naam']) . "</td>
                <td>" . htmlspecialchars($row['cijfer']) . "</td>
                <td><a href='insertResult.php'>invoegen</a></td>
              </tr>";
    }

    echo "</table>";
} catch (PDOException $e) {
    echo "Error: " . $e->getMessage();
}
?>
<?php
$host = 'localhost';
$user = 'root';
$password = '';
$dbname = 'cijfersysteem';

if ($_SERVER["REQUEST_METHOD"] == "POST") {
    $naam = filter_var($_POST['naam'], FILTER_SANITIZE_STRING);
    $cijfer = filter_var($_POST['cijfer'], FILTER_VALIDATE_FLOAT);

    if ($naam && $cijfer && $cijfer >= 1 && $cijfer <= 10) {
        try {
            $pdo = new PDO("mysql:host=$host;dbname=$dbname", $user, $password);
            $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

            $stmt = $pdo->prepare("INSERT INTO cijfers (naam, cijfer) VALUES (:naam, :cijfer)");
            $stmt->execute(['naam' => $naam, 'cijfer' => $cijfer]);

            header("Location: overzicht.php");
            exit();
        } catch (PDOException $e) {
            echo "Error: " . $e->getMessage();
        }
    } else {
        echo "Invalid input!";
    }
}
?>
<form action="saveResult.php" method="post">
    <label for="naam">Leerling</label>
    <input type="text" id="naam" name="naam" required>
    <br>
    <label for="cijfer">Cijfer</label>
    <input type="number" id="cijfer" name="cijfer" step="0.1" min="1" max="10" required>
    <br>
    <input type="submit" value="Opslaan">
</form>


